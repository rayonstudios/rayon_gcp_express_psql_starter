[
  {
    "sql": {
      "up": "CREATE SCHEMA \"bb_00000000000000000000000000_000000\";"
    },
    "id": "mig_b37afae13f5464377bd4"
  },
  {
    "create_table": {
      "name": "users",
      "columns": [
        {
          "name": "name",
          "type": "text"
        },
        {
          "name": "email",
          "type": "text",
          "unique": true
        },
        {
          "name": "bio",
          "type": "text",
          "nullable": true
        },
        {
          "name": "xata_createdat",
          "type": "timestamptz",
          "default": "now()"
        },
        {
          "name": "xata_updatedat",
          "type": "timestamptz",
          "default": "now()"
        },
        {
          "name": "xata_id",
          "type": "text",
          "unique": true,
          "default": "'rec_' || xata_private.xid()",
          "check": {
            "name": "users_xata_id_length_xata_id",
            "constraint": "length(\"xata_id\") < 256"
          }
        },
        {
          "name": "xata_version",
          "type": "integer",
          "default": "0"
        },
        {
          "name": "refresh_token_version",
          "type": "int",
          "default": "'0'",
          "comment": ""
        },
        {
          "name": "role",
          "type": "text",
          "default": "'user'",
          "comment": ""
        },
        {
          "name": "email_verified",
          "type": "bool",
          "default": "'false'",
          "comment": ""
        },
        {
          "name": "password_hash",
          "type": "text",
          "comment": ""
        },
        {
          "name": "photo",
          "type": "text",
          "nullable": true,
          "comment": ""
        },
        {
          "name": "fcm_tokens",
          "type": "text[]",
          "nullable": true,
          "comment": ""
        },
        {
          "name": "unread_noti_count",
          "type": "int",
          "nullable": true,
          "default": "'0'",
          "comment": ""
        },
        {
          "name": "photo_sizes",
          "type": "json",
          "default": "'{}'",
          "comment": ""
        }
      ]
    },
    "id": "mig_53cd117003272858a75b"
  },
  {
    "sql": {
      "up": "ALTER TABLE \"users\" REPLICA IDENTITY FULL",
      "onComplete": true
    },
    "id": "mig_fa1700b27d7dd1cd9b36"
  },
  {
    "sql": {
      "up": "CREATE TRIGGER xata_maintain_metadata_trigger_pgroll\n  BEFORE INSERT OR UPDATE\n  ON \"users\"\n  FOR EACH ROW\n  EXECUTE FUNCTION xata_private.maintain_metadata_trigger_pgroll()",
      "onComplete": true
    },
    "id": "mig_08697fe32308c5e20233"
  },
  {
    "create_table": {
      "name": "posts",
      "columns": [
        {
          "name": "title",
          "type": "text"
        },
        {
          "name": "labels",
          "type": "text[]"
        },
        {
          "name": "slug",
          "type": "text"
        },
        {
          "name": "xata_id",
          "type": "text",
          "unique": true,
          "default": "'rec_' || xata_private.xid()",
          "check": {
            "name": "posts_xata_id_length_xata_id",
            "constraint": "length(\"xata_id\") < 256"
          }
        },
        {
          "name": "xata_version",
          "type": "integer",
          "default": "0"
        },
        {
          "name": "xata_createdat",
          "type": "timestamptz",
          "default": "now()"
        },
        {
          "name": "xata_updatedat",
          "type": "timestamptz",
          "default": "now()"
        },
        {
          "name": "author_id",
          "type": "text",
          "comment": "{\"xata.link\":\"users\"}",
          "references": {
            "name": "fk_users",
            "table": "users",
            "column": "xata_id"
          }
        },
        {
          "name": "views",
          "type": "int",
          "default": "'0'",
          "comment": ""
        },
        {
          "name": "text",
          "type": "text"
        }
      ]
    },
    "id": "mig_334f70e389ea74c90efa"
  },
  {
    "sql": {
      "up": "ALTER TABLE \"posts\" REPLICA IDENTITY FULL",
      "onComplete": true
    },
    "id": "mig_4b854a92184baf84b17d"
  },
  {
    "sql": {
      "up": "CREATE TRIGGER xata_maintain_metadata_trigger_pgroll\n  BEFORE INSERT OR UPDATE\n  ON \"posts\"\n  FOR EACH ROW\n  EXECUTE FUNCTION xata_private.maintain_metadata_trigger_pgroll()",
      "onComplete": true
    },
    "id": "mig_541f832af328dd0cb2a0"
  },
  {
    "create_table": {
      "name": "otps",
      "columns": [
        {
          "name": "xata_id",
          "type": "text",
          "unique": true,
          "default": "'rec_' || xata_private.xid()",
          "check": {
            "name": "otps_xata_id_length_xata_id",
            "constraint": "length(\"xata_id\") < 256"
          }
        },
        {
          "name": "xata_version",
          "type": "integer",
          "default": "0"
        },
        {
          "name": "xata_createdat",
          "type": "timestamptz",
          "default": "now()"
        },
        {
          "name": "xata_updatedat",
          "type": "timestamptz",
          "default": "now()"
        },
        {
          "name": "otp",
          "type": "text",
          "comment": ""
        },
        {
          "name": "email",
          "type": "text",
          "comment": ""
        }
      ]
    },
    "id": "mig_c0e6ed1a90c7ed6b4088"
  },
  {
    "sql": {
      "up": "ALTER TABLE \"otps\" REPLICA IDENTITY FULL",
      "onComplete": true
    },
    "id": "mig_400505e265d3c6733e39"
  },
  {
    "sql": {
      "up": "CREATE TRIGGER xata_maintain_metadata_trigger_pgroll\n  BEFORE INSERT OR UPDATE\n  ON \"otps\"\n  FOR EACH ROW\n  EXECUTE FUNCTION xata_private.maintain_metadata_trigger_pgroll()",
      "onComplete": true
    },
    "id": "mig_ad2d3c2128d89f18f95e"
  },
  {
    "create_table": {
      "name": "notifications",
      "columns": [
        {
          "name": "xata_id",
          "type": "text",
          "unique": true,
          "default": "'rec_' || xata_private.xid()",
          "check": {
            "name": "notifications_xata_id_length_xata_id",
            "constraint": "length(\"xata_id\") < 256"
          }
        },
        {
          "name": "xata_version",
          "type": "integer",
          "default": "0"
        },
        {
          "name": "xata_createdat",
          "type": "timestamptz",
          "default": "now()"
        },
        {
          "name": "xata_updatedat",
          "type": "timestamptz",
          "default": "now()"
        },
        {
          "name": "title",
          "type": "text",
          "comment": ""
        },
        {
          "name": "link",
          "type": "text",
          "nullable": true,
          "comment": ""
        },
        {
          "name": "metadata",
          "type": "json",
          "nullable": true,
          "comment": ""
        },
        {
          "name": "body",
          "type": "text",
          "comment": ""
        },
        {
          "name": "event",
          "type": "text",
          "comment": ""
        },
        {
          "name": "image",
          "type": "text",
          "nullable": true,
          "comment": ""
        }
      ]
    },
    "id": "mig_ef61ecaee586c17b3de7"
  },
  {
    "sql": {
      "up": "ALTER TABLE \"notifications\" REPLICA IDENTITY FULL",
      "onComplete": true
    },
    "id": "mig_0fca62a368a5bf563350"
  },
  {
    "sql": {
      "up": "CREATE TRIGGER xata_maintain_metadata_trigger_pgroll\n  BEFORE INSERT OR UPDATE\n  ON \"notifications\"\n  FOR EACH ROW\n  EXECUTE FUNCTION xata_private.maintain_metadata_trigger_pgroll()",
      "onComplete": true
    },
    "id": "mig_f5d2e7e4a6bc42b5b4e4"
  },
  {
    "create_table": {
      "name": "userNotifications",
      "columns": [
        {
          "name": "xata_id",
          "type": "text",
          "unique": true,
          "default": "'rec_' || xata_private.xid()",
          "check": {
            "name": "userNotifications_xata_id_length_xata_id",
            "constraint": "length(\"xata_id\") < 256"
          }
        },
        {
          "name": "xata_version",
          "type": "integer",
          "default": "0"
        },
        {
          "name": "xata_createdat",
          "type": "timestamptz",
          "default": "now()"
        },
        {
          "name": "xata_updatedat",
          "type": "timestamptz",
          "default": "now()"
        },
        {
          "name": "user_id",
          "type": "text",
          "comment": "{\"xata.link\":\"users\"}",
          "references": {
            "name": "user_id_link",
            "table": "users",
            "column": "xata_id",
            "on_delete": "CASCADE"
          }
        },
        {
          "name": "notification_id",
          "type": "text",
          "comment": "{\"xata.link\":\"notifications\"}",
          "references": {
            "name": "notification_id_link",
            "table": "notifications",
            "column": "xata_id",
            "on_delete": "CASCADE"
          }
        }
      ]
    },
    "id": "mig_a161cb03bf7d076648ef"
  },
  {
    "sql": {
      "up": "ALTER TABLE \"userNotifications\" REPLICA IDENTITY FULL",
      "onComplete": true
    },
    "id": "mig_e4607fe59e0420568fad"
  },
  {
    "sql": {
      "up": "CREATE TRIGGER xata_maintain_metadata_trigger_pgroll\n  BEFORE INSERT OR UPDATE\n  ON \"userNotifications\"\n  FOR EACH ROW\n  EXECUTE FUNCTION xata_private.maintain_metadata_trigger_pgroll()",
      "onComplete": true
    },
    "id": "mig_c1ffa738848127a95d68"
  }
]