[
  {
    "sql": {
      "up": "CREATE SCHEMA \"bb_00000000000000000000000000_000000\";"
    },
    "id": "mig_optimized_0"
  },
  {
    "create_table": {
      "name": "users",
      "columns": [
        {
          "name": "name",
          "type": "text"
        },
        {
          "name": "email",
          "type": "text",
          "unique": {
            "name": "users_email_unique"
          }
        },
        {
          "name": "bio",
          "type": "text",
          "nullable": true
        },
        {
          "name": "xata_createdat",
          "type": "timestamptz",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "xata_updatedat",
          "type": "timestamptz",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "xata_id",
          "type": "text",
          "nullable": false,
          "unique": true,
          "default": "'rec_' || xata_private.xid()",
          "check": {
            "name": "users_xata_id_length_xata_id",
            "constraint": "length(\"xata_id\") < 256"
          }
        },
        {
          "name": "xata_version",
          "type": "integer",
          "nullable": false,
          "default": "0"
        },
        {
          "name": "refresh_token_version",
          "type": "int",
          "nullable": false,
          "unique": false,
          "default": "'0'",
          "comment": ""
        },
        {
          "name": "role",
          "type": "text",
          "nullable": false,
          "unique": false,
          "default": "'user'",
          "comment": ""
        },
        {
          "name": "email_verified",
          "type": "bool",
          "nullable": false,
          "unique": false,
          "default": "'false'",
          "comment": ""
        },
        {
          "name": "password_hash",
          "type": "text",
          "nullable": false,
          "unique": false,
          "comment": ""
        },
        {
          "name": "photo",
          "type": "text",
          "nullable": true,
          "unique": false,
          "comment": ""
        },
        {
          "name": "fcm_tokens",
          "type": "text[]",
          "nullable": true,
          "comment": ""
        },
        {
          "name": "unread_noti_count",
          "type": "int",
          "nullable": true,
          "default": "'0'",
          "comment": ""
        },
        {
          "name": "photo_sizes",
          "type": "json",
          "default": "'{}'",
          "comment": ""
        }
      ]
    },
    "id": "mig_optimized_1"
  },
  {
    "sql": {
      "up": "ALTER TABLE \"users\" REPLICA IDENTITY FULL",
      "onComplete": true
    },
    "id": "mig_optimized_2"
  },
  {
    "sql": {
      "up": "CREATE TRIGGER xata_maintain_metadata_trigger_pgroll\n  BEFORE INSERT OR UPDATE\n  ON \"users\"\n  FOR EACH ROW\n  EXECUTE FUNCTION xata_private.maintain_metadata_trigger_pgroll()",
      "onComplete": true
    },
    "id": "mig_optimized_3"
  },
  {
    "create_table": {
      "name": "posts",
      "columns": [
        {
          "name": "title",
          "type": "text"
        },
        {
          "name": "labels",
          "type": "text[]"
        },
        {
          "name": "slug",
          "type": "text"
        },
        {
          "name": "text",
          "type": "text"
        },
        {
          "name": "xata_id",
          "type": "text",
          "nullable": false,
          "unique": true,
          "default": "'rec_' || xata_private.xid()",
          "check": {
            "name": "posts_xata_id_length_xata_id",
            "constraint": "length(\"xata_id\") < 256"
          }
        },
        {
          "name": "xata_version",
          "type": "integer",
          "nullable": false,
          "default": "0"
        },
        {
          "name": "xata_createdat",
          "type": "timestamptz",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "xata_updatedat",
          "type": "timestamptz",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "author_id",
          "type": "text",
          "comment": "{\"xata.link\":\"users\"}",
          "references": {
            "name": "fk_users",
            "table": "users",
            "column": "xata_id"
          }
        },
        {
          "name": "views",
          "type": "int",
          "nullable": false,
          "unique": false,
          "default": "'0'",
          "comment": ""
        }
      ]
    },
    "id": "mig_optimized_4"
  },
  {
    "sql": {
      "up": "ALTER TABLE \"posts\" REPLICA IDENTITY FULL",
      "onComplete": true
    },
    "id": "mig_optimized_5"
  },
  {
    "sql": {
      "up": "CREATE TRIGGER xata_maintain_metadata_trigger_pgroll\n  BEFORE INSERT OR UPDATE\n  ON \"posts\"\n  FOR EACH ROW\n  EXECUTE FUNCTION xata_private.maintain_metadata_trigger_pgroll()",
      "onComplete": true
    },
    "id": "mig_optimized_6"
  },
  {
    "sql": {
      "up": "CREATE TABLE _prisma_migrations (id varchar(36) PRIMARY KEY NOT NULL, checksum varchar(64) NOT NULL, finished_at timestamptz, migration_name varchar(255) NOT NULL, logs text, rolled_back_at timestamptz, started_at timestamptz NOT NULL DEFAULT now(), applied_steps_count int NOT NULL DEFAULT 0)"
    },
    "id": "mig_optimized_7"
  },
  {
    "sql": {
      "up": "ALTER TABLE \"_prisma_migrations\" REPLICA IDENTITY FULL",
      "onComplete": true
    },
    "id": "mig_optimized_8"
  },
  {
    "sql": {
      "up": "CREATE TRIGGER xata_maintain_metadata_trigger_pgroll\n  BEFORE INSERT OR UPDATE\n  ON \"_prisma_migrations\"\n  FOR EACH ROW\n  EXECUTE FUNCTION xata_private.maintain_metadata_trigger_pgroll()",
      "onComplete": true
    },
    "id": "mig_optimized_9"
  },
  {
    "create_table": {
      "name": "otps",
      "columns": [
        {
          "name": "xata_id",
          "type": "text",
          "nullable": false,
          "unique": true,
          "default": "'rec_' || xata_private.xid()",
          "check": {
            "name": "otps_xata_id_length_xata_id",
            "constraint": "length(\"xata_id\") < 256"
          }
        },
        {
          "name": "xata_version",
          "type": "integer",
          "nullable": false,
          "default": "0"
        },
        {
          "name": "xata_createdat",
          "type": "timestamptz",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "xata_updatedat",
          "type": "timestamptz",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "otp",
          "type": "text",
          "nullable": false,
          "unique": false,
          "comment": ""
        },
        {
          "name": "email",
          "type": "text",
          "nullable": false,
          "unique": false,
          "comment": ""
        }
      ]
    },
    "id": "mig_optimized_10"
  },
  {
    "sql": {
      "up": "ALTER TABLE \"otps\" REPLICA IDENTITY FULL",
      "onComplete": true
    },
    "id": "mig_optimized_11"
  },
  {
    "sql": {
      "up": "CREATE TRIGGER xata_maintain_metadata_trigger_pgroll\n  BEFORE INSERT OR UPDATE\n  ON \"otps\"\n  FOR EACH ROW\n  EXECUTE FUNCTION xata_private.maintain_metadata_trigger_pgroll()",
      "onComplete": true
    },
    "id": "mig_optimized_12"
  },
  {
    "create_table": {
      "name": "notifications",
      "columns": [
        {
          "name": "xata_id",
          "type": "text",
          "unique": true,
          "default": "'rec_' || xata_private.xid()",
          "check": {
            "name": "notifications_xata_id_length_xata_id",
            "constraint": "length(\"xata_id\") < 256"
          }
        },
        {
          "name": "xata_version",
          "type": "integer",
          "default": "0"
        },
        {
          "name": "xata_createdat",
          "type": "timestamptz",
          "default": "now()"
        },
        {
          "name": "xata_updatedat",
          "type": "timestamptz",
          "default": "now()"
        },
        {
          "name": "title",
          "type": "text",
          "comment": ""
        },
        {
          "name": "link",
          "type": "text",
          "nullable": true,
          "comment": ""
        },
        {
          "name": "metadata",
          "type": "json",
          "nullable": true,
          "comment": ""
        },
        {
          "name": "body",
          "type": "text",
          "comment": ""
        },
        {
          "name": "event",
          "type": "text",
          "comment": ""
        },
        {
          "name": "image",
          "type": "text",
          "nullable": true,
          "comment": ""
        }
      ]
    },
    "id": "mig_optimized_13"
  },
  {
    "sql": {
      "up": "ALTER TABLE \"notifications\" REPLICA IDENTITY FULL",
      "onComplete": true
    },
    "id": "mig_optimized_14"
  },
  {
    "sql": {
      "up": "CREATE TRIGGER xata_maintain_metadata_trigger_pgroll\n  BEFORE INSERT OR UPDATE\n  ON \"notifications\"\n  FOR EACH ROW\n  EXECUTE FUNCTION xata_private.maintain_metadata_trigger_pgroll()",
      "onComplete": true
    },
    "id": "mig_optimized_15"
  },
  {
    "create_table": {
      "name": "userNotifications",
      "columns": [
        {
          "name": "xata_id",
          "type": "text",
          "unique": true,
          "default": "'rec_' || xata_private.xid()",
          "check": {
            "name": "userNotifications_xata_id_length_xata_id",
            "constraint": "length(\"xata_id\") < 256"
          }
        },
        {
          "name": "xata_version",
          "type": "integer",
          "default": "0"
        },
        {
          "name": "xata_createdat",
          "type": "timestamptz",
          "default": "now()"
        },
        {
          "name": "xata_updatedat",
          "type": "timestamptz",
          "default": "now()"
        },
        {
          "name": "user_id",
          "type": "text",
          "comment": "{\"xata.link\":\"users\"}",
          "references": {
            "name": "user_id_link",
            "table": "users",
            "column": "xata_id",
            "on_delete": "CASCADE"
          }
        },
        {
          "name": "notification_id",
          "type": "text",
          "comment": "{\"xata.link\":\"notifications\"}",
          "references": {
            "name": "notification_id_link",
            "table": "notifications",
            "column": "xata_id",
            "on_delete": "CASCADE"
          }
        }
      ]
    },
    "id": "mig_optimized_16"
  },
  {
    "sql": {
      "up": "ALTER TABLE \"userNotifications\" REPLICA IDENTITY FULL",
      "onComplete": true
    },
    "id": "mig_optimized_17"
  },
  {
    "sql": {
      "up": "CREATE TRIGGER xata_maintain_metadata_trigger_pgroll\n  BEFORE INSERT OR UPDATE\n  ON \"userNotifications\"\n  FOR EACH ROW\n  EXECUTE FUNCTION xata_private.maintain_metadata_trigger_pgroll()",
      "onComplete": true
    },
    "id": "mig_optimized_18"
  }
]